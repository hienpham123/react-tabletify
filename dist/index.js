"use strict";var e=require("react/jsx-runtime");function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var n=t(require("react")),r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function i(e,t,n){if(n||2===arguments.length)for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function c(e,t){void 0===t&&(t=10);var c=n.useState(""),s=c[0],o=c[1],l=n.useState(null),a=l[0],u=l[1],d=n.useState("asc"),h=d[0],f=d[1],m=n.useState(1),g=m[0],p=m[1],x=n.useState({}),v=x[0],j=x[1],k=n.useMemo(function(){var t=e;if(Object.entries(v).forEach(function(e){var n=e[0],r=e[1];r.length>0&&(t=t.filter(function(e){return r.includes(String(e[n]))}))}),s.trim()){var n=s.toLowerCase();t=t.filter(function(e){return Object.values(e).some(function(e){return String(e).toLowerCase().includes(n)})})}return t},[e,s,v]),y=n.useMemo(function(){return a?i([],k,!0).sort(function(e,t){var n=e[a],r=t[a];if(null==n)return 1;if(null==r)return-1;if(n===r)return 0;var i=String(n).localeCompare(String(r),void 0,{numeric:!0,sensitivity:"base"});return"asc"===h?i:-i}):k},[k,a,h]),C=Math.ceil(y.length/t),b=n.useMemo(function(){var e=(g-1)*t;return y.slice(e,e+t)},[y,g,t]);return n.useEffect(function(){p(1)},[s,a,h,v]),{filtered:k,paged:b,currentPage:g,setCurrentPage:p,totalPages:C,itemsPerPage:t,search:s,setSearch:o,sortKey:a,sortDir:h,handleSort:function(e,t){t?(u(e),f(t)):a===e?f(function(e){return"asc"===e?"desc":"asc"}):(u(e),f("asc"))},filters:v,setFilter:function(e,t){j(function(n){var i=r({},n);return 0===t.length?delete i[e]:i[e]=t,i})}}}"function"==typeof SuppressedError&&SuppressedError;var s=function(t){var n=t.totalItems,i=t.itemsPerPage,c=t.currentPage,s=t.onPageChange,l=t.maxVisible,a=void 0===l?5:l,u=Math.ceil(n/i);if(u<=1)return null;var d=Math.floor(a/2),h=Math.max(1,c-d),f=Math.min(u,h+a-1);f-h<a-1&&(h=Math.max(1,f-a+1));var m=Array.from({length:f-h+1},function(e,t){return h+t}),g=function(e){e<1||e>u||e===c||s(e)};return e.jsxs("div",r({style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginTop:"1rem",flexWrap:"wrap"}},{children:[e.jsx("button",r({onClick:function(){return g(c-1)},disabled:1===c,style:o},{children:"Prev"})),h>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",r({style:o,onClick:function(){return g(1)}},{children:"1"})),h>2&&e.jsx("span",r({style:{color:"#999"}},{children:"..."}))]}),m.map(function(t){return e.jsx("button",r({onClick:function(){return g(t)},style:r(r({},o),t===c?{background:"#6ABE28",color:"#fff",fontWeight:600,borderColor:"#6ABE28"}:{})},{children:t}),t)}),f<u&&e.jsxs(e.Fragment,{children:[f<u-1&&e.jsx("span",r({style:{color:"#999"}},{children:"..."})),e.jsx("button",r({style:o,onClick:function(){return g(u)}},{children:u}))]}),e.jsx("button",r({onClick:function(){return g(c+1)},disabled:c===u,style:o},{children:"Next"}))]}))},o={border:"1px solid #ccc",borderRadius:4,padding:"4px 10px",cursor:"pointer",background:"#fff",transition:"0.2s",fontSize:14};function l(t){var i=t.anchorRef,c=t.onSortAsc,s=t.onSortDesc,o=t.onFilter;t.onDismiss;var l=t.onMouseEnter,a=t.onMouseLeave,u=n.useRef(null);if(!i.current)return null;var d=i.current.getBoundingClientRect();return e.jsxs("div",r({ref:u,className:"th-callout",style:{top:d.bottom+6,left:d.left,position:"fixed"},onMouseEnter:l,onMouseLeave:a},{children:[e.jsxs("button",r({onClick:c,className:"th-callout-item"},{children:[e.jsx("span",r({className:"th-callout-icon"},{children:"↑"})),e.jsx("span",r({className:"th-callout-text"},{children:"A to Z"}))]})),e.jsxs("button",r({onClick:s,className:"th-callout-item"},{children:[e.jsx("span",r({className:"th-callout-icon"},{children:"↓"})),e.jsx("span",r({className:"th-callout-text"},{children:"Z to A"}))]})),e.jsx("hr",{className:"th-callout-divider"}),e.jsx("button",r({onClick:o,className:"th-callout-item"},{children:e.jsx("span",r({className:"th-callout-text"},{children:"Filter by"}))}))]}))}function a(t){var c=t.field,s=t.values,o=t.selected,l=t.onApply,a=t.onDismiss,u=n.useState(o),d=u[0],h=u[1],f=n.useState(""),m=f[0],g=f[1];n.useEffect(function(){h(o),g("")},[c]);var p=n.useMemo(function(){if(!m.trim())return s;var e=m.toLowerCase();return s.filter(function(t){return t.toLowerCase().includes(e)})},[s,m]);return e.jsxs("div",r({className:"th-filter-panel open"},{children:[e.jsxs("div",r({className:"th-filter-header"},{children:[e.jsxs("strong",{children:["Filter by '",c,"'"]}),e.jsx("button",r({className:"th-filter-close",onClick:a,"aria-label":"Close"},{children:e.jsx("svg",r({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8 7.29289L3.85355 3.14645C3.65829 2.95118 3.34171 2.95118 3.14645 3.14645C2.95118 3.34171 2.95118 3.65829 3.14645 3.85355L7.29289 8L3.14645 12.1464C2.95118 12.3417 2.95118 12.6583 3.14645 12.8536C3.34171 13.0488 3.65829 13.0488 3.85355 12.8536L8 8.70711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.70711 8L12.8536 3.85355Z",fill:"currentColor"})}))}))]})),e.jsxs("div",r({className:"th-filter-content"},{children:[e.jsx("div",r({className:"th-filter-search"},{children:e.jsx("input",{type:"text",className:"th-filter-search-input",placeholder:"Select ".concat(c," to display..."),value:m,onChange:function(e){return g(e.target.value)}})})),e.jsx("div",r({className:"th-filter-options-list"},{children:p.length>0?p.map(function(t){return e.jsxs("div",r({className:"th-filter-option"},{children:[e.jsx("input",{type:"checkbox",id:"filter-".concat(c,"-").concat(t),checked:d.includes(t),onChange:function(){return function(e){h(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):i(i([],t,!0),[e],!1)})}(t)}}),e.jsx("label",r({htmlFor:"filter-".concat(c,"-").concat(t)},{children:t}))]}),t)}):e.jsx("div",r({className:"th-filter-no-results"},{children:"No results found"}))}))]})),e.jsxs("div",r({className:"th-filter-footer"},{children:[e.jsx("button",r({className:"th-btn",onClick:function(){h([])}},{children:"Clear all"})),e.jsx("button",r({className:"th-btn primary",onClick:function(){return l(d)}},{children:"Apply"}))]}))]}))}exports.ReactTabletify=function(t){var o=t.columns,u=t.data,d=t.itemsPerPage,h=void 0===d?10:d,f=t.groupBy,m=t.onRenderCell,g=t.onRenderRow,p=t.onRenderHeader,x=t.onItemInvoked,v=t.onColumnHeaderClick,j=t.getKey,k=t.onActiveItemChanged,y=t.onItemContextMenu,C=t.className,b=t.styles,N=t.selectionMode,S=void 0===N?"none":N,w=t.onSelectionChanged,P=t.showPagination,M=void 0===P||P,L=c(u,h),E=n.useState(null),O=E[0],A=E[1],R=n.useState(null),F=R[0],D=R[1],K=n.useState(new Set),T=K[0],I=K[1],B=n.useState(new Set),W=B[0],Z=B[1],q=n.useState(void 0),z=q[0],H=q[1],V=n.useRef({}),G=n.useRef(null),J=n.useCallback(function(e,t){return j?j(e,t):void 0!==e.id?e.id:t},[j]),Q=n.useCallback(function(e,t,n){var r=J(e,t);Z(function(e){var t=new Set(e);if("single"===S?(t.clear(),n&&t.add(r)):"multiple"===S&&(n?t.add(r):t.delete(r)),w){var i=u.filter(function(e,n){return t.has(J(e,n))});w(i)}return t}),H(t),k&&k(e,t)},[S,J,w,k,u]),U=n.useCallback(function(e){if("multiple"===S){var t=L.paged;Z(function(n){var r=new Set(n);if(e?t.forEach(function(e,t){r.add(J(e,t))}):t.forEach(function(e,t){r.delete(J(e,t))}),w){var i=u.filter(function(e,t){return r.has(J(e,t))});w(i)}return r})}},[S,L.paged,J,w,u]),X=n.useCallback(function(e,t,n){if(!n.target.closest(".th-selection-checkbox")){if(x&&x(e,t),"none"!==S){var r=J(e,t);Z(function(e){var t=new Set(e);if("single"===S?(t.clear(),t.add(r)):"multiple"===S&&(n.ctrlKey||n.metaKey?t.has(r)?t.delete(r):t.add(r):(t.clear(),t.add(r))),w){var i=u.filter(function(e,n){return t.has(J(e,n))});w(i)}return t})}H(t),k&&k(e,t)}},[x,S,J,w,k,u]),Y=n.useMemo(function(){if("multiple"!==S)return!1;var e=L.paged;return 0!==e.length&&e.every(function(e,t){return W.has(J(e,t))})},[S,L.paged,W,J]),$=n.useMemo(function(){if("multiple"!==S)return!1;var e=L.paged;if(0===e.length)return!1;var t=e.filter(function(e,t){return W.has(J(e,t))}).length;return t>0&&t<e.length},[S,L.paged,W,J]),_=n.useMemo(function(){return F?Array.from(new Set(u.map(function(e){return String(e[F])}))):[]},[F,u]),ee=function(){G.current&&clearTimeout(G.current),G.current=setTimeout(function(){A(null)},200)};n.useEffect(function(){return function(){G.current&&clearTimeout(G.current)}},[]),n.useEffect(function(){f&&L.setCurrentPage(1)},[f]);var te=n.useMemo(function(){if(!f)return null;var e={};return(L.sortKey?i([],L.filtered,!0).sort(function(e,t){var n=e[L.sortKey],r=t[L.sortKey];if(null==n)return 1;if(null==r)return-1;if(n===r)return 0;var i=String(n).localeCompare(String(r),void 0,{numeric:!0,sensitivity:"base"});return"asc"===L.sortDir?i:-i}):L.filtered).forEach(function(t){var n=String(t[f]);e[n]||(e[n]=[]),e[n].push(t)}),e},[L.filtered,L.sortKey,L.sortDir,f]);n.useEffect(function(){if(f&&te){var e=Object.keys(te).length,t=Math.ceil(e/L.itemsPerPage);L.currentPage>t&&t>0&&L.setCurrentPage(1)}},[te,f,L.itemsPerPage,L.currentPage,L.setCurrentPage]);var ne=n.useMemo(function(){if(!f||!te)return null;var e=Object.entries(te);e.sort(function(e,t){var n=e[0],r=t[0];return n.localeCompare(r)});var t=(L.currentPage-1)*L.itemsPerPage,n=t+L.itemsPerPage;return e.slice(t,n)},[te,L.currentPage,L.itemsPerPage,f]),re=n.useCallback(function(e,t,n){var r;return t.onRenderCell?t.onRenderCell(e,t.key,n):m?m(e,t.key,n):String(null!==(r=e[t.key])&&void 0!==r?r:"")},[m]);return e.jsxs("div",r({className:"th-table ".concat(C||""),style:b},{children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:["none"!==S&&e.jsx("th",r({className:"th-selection-column"},{children:"multiple"===S?e.jsx("div",r({className:"th-selection-checkbox-wrapper"},{children:e.jsx("input",{type:"checkbox",className:"th-selection-checkbox",checked:Y,ref:function(e){e&&(e.indeterminate=$)},onChange:function(e){return U(e.target.checked)},onClick:function(e){return e.stopPropagation()}})})):e.jsx("div",{className:"th-selection-checkbox-wrapper"})})),o.map(function(t,n){return e.jsxs("th",{children:[p?p(t,n):e.jsxs("div",r({className:"th-header-cell",ref:function(e){e&&(V.current[String(t.key)]=e)},onMouseEnter:function(){return e=t.key,G.current&&clearTimeout(G.current),void(G.current=setTimeout(function(){A(e)},150));var e},onMouseLeave:ee,onClick:function(e){return null==v?void 0:v(t,e)}},{children:[e.jsx("span",r({className:"th-header-label"},{children:t.label})),e.jsxs("div",r({className:"th-header-icons"},{children:[L.filters[String(t.key)]&&L.filters[String(t.key)].length>0&&e.jsx("span",r({className:"th-header-filter-icon",title:"Filtered"},{children:e.jsxs("svg",r({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},{children:[e.jsx("path",{d:"M3 5h18M6 12h12M10 19h4"}),e.jsx("circle",{cx:"18",cy:"18",r:"3.5",fill:"currentColor"}),e.jsx("path",{d:"M16.5 18l1 1 2-2.2",stroke:"#fff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}))})),L.sortKey===t.key&&e.jsx("span",r({className:"th-header-sort-icon"},{children:"asc"===L.sortDir?e.jsx("span",r({className:"th-sort-arrow"},{children:"↑"})):e.jsx("span",r({className:"th-sort-arrow"},{children:"↓"}))}))]})),e.jsx("span",r({className:"th-header-action"},{children:"⋮"}))]})),O===t.key&&e.jsx(l,{anchorRef:{current:V.current[String(t.key)]},onSortAsc:function(){L.handleSort(t.key,"asc"),A(null)},onSortDesc:function(){L.handleSort(t.key,"desc"),A(null)},onFilter:function(){return e=t.key,D(String(e)),void A(null);var e},onDismiss:function(){return A(null)},onMouseEnter:function(){G.current&&clearTimeout(G.current)},onMouseLeave:ee})]},String(t.key))})]})}),e.jsx("tbody",{children:f&&ne?ne.map(function(t){var i=t[0],c=t[1],s=T.has(i);return e.jsxs(n.Fragment,{children:[e.jsx("tr",r({className:"th-group-header"},{children:e.jsx("td",r({colSpan:o.length,className:"th-group-header-cell"},{children:e.jsxs("button",r({className:"th-group-toggle",onClick:function(){return function(e){I(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}(i)},"aria-expanded":s},{children:[e.jsx("svg",r({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s?"expanded":""},{children:e.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})),e.jsxs("span",r({className:"th-group-label"},{children:[String(f),": ",i]})),e.jsxs("span",r({className:"th-group-count"},{children:["(",c.length,")"]}))]}))}))})),s&&c.map(function(t,i){var c=L.filtered.findIndex(function(e){return J(e,L.filtered.indexOf(e))===J(t,i)||e===t}),s=c>=0?c:i,l=J(t,s),a=W.has(l),u=z===s;return g?e.jsx(n.Fragment,{children:g(t,s,o)},l):e.jsxs("tr",r({className:"th-group-row ".concat(a?"th-row-selected":""," ").concat(u?"th-row-active":""),onClick:function(e){return X(t,s,e)},onContextMenu:function(e){return null==y?void 0:y(t,s,e)}},{children:["none"!==S&&e.jsx("td",r({className:"th-selection-column"},{children:e.jsx("div",r({className:"th-selection-checkbox-wrapper"},{children:e.jsx("input",{type:"single"===S?"radio":"checkbox",className:"th-selection-checkbox",checked:a,onChange:function(e){return Q(t,s,e.target.checked)},onClick:function(e){return e.stopPropagation()}})}))})),o.map(function(n){return e.jsx("td",{children:re(t,n,s)},String(n.key))})]}),l)})]},i)}):L.paged.map(function(t,i){var c=J(t,i),s=W.has(c),l=z===i;return g?e.jsx(n.Fragment,{children:g(t,i,o)},c):e.jsxs("tr",r({className:"".concat(s?"th-row-selected":""," ").concat(l?"th-row-active":""),onClick:function(e){return X(t,i,e)},onContextMenu:function(e){return null==y?void 0:y(t,i,e)}},{children:["none"!==S&&e.jsx("td",r({className:"th-selection-column"},{children:e.jsx("div",r({className:"th-selection-checkbox-wrapper"},{children:e.jsx("input",{type:"single"===S?"radio":"checkbox",className:"th-selection-checkbox",checked:s,onChange:function(e){return Q(t,i,e.target.checked)},onClick:function(e){return e.stopPropagation()}})}))})),o.map(function(n){return e.jsx("td",{children:re(t,n,i)},String(n.key))})]}),c)})})]}),M&&e.jsx(s,{totalItems:f&&te?Object.keys(te).length:L.filtered.length,itemsPerPage:L.itemsPerPage,currentPage:L.currentPage,onPageChange:L.setCurrentPage}),F&&e.jsx(a,{field:F,values:_,selected:L.filters[F]||[],onApply:function(e){L.setFilter(F,e),D(null)},onDismiss:function(){return D(null)}})]}))},exports.useTable=c;
//# sourceMappingURL=index.js.map
